# Sistema de Temas Avançado - GRC Controller\n\n## Visão Geral\n\nO GRC Controller implementa um sistema de temas abrangente que garante que **todos** os componentes da aplicação estejam integrados à paleta de cores configurável definida em **Temas e Cores** nas configurações gerais.\n\n## Arquitetura do Sistema\n\n### Arquivos Principais\n\n1. **`index.css`** - Arquivo principal com variáveis CSS base\n2. **`theme-system.css`** - Sistema de temas core com especificidade CSS\n3. **`theme-extensions.css`** - Extensões para componentes específicos do GRC\n4. **`useThemeColors.ts`** - Hook para acessar cores do tema\n5. **`theme-utils.tsx`** - Componentes utilitários com tema integrado\n\n### Hooks de Tema\n\n- **`useTenantTheme.ts`** - Gerencia temas específicos do tenant\n- **`ThemeContext.tsx`** - Context global de temas\n- **`useTheme.ts`** - Hook customizado para aplicação de temas\n\n## Características Principais\n\n### ✅ Integração Completa\n- Todos os componentes UI integrados à paleta configurável\n- Suporte completo a dark mode\n- Responsivo e acessível\n- Otimizado para performance\n\n### ✅ Especificidade CSS\n- Usa especificidade CSS adequada ao invés de `!important`\n- Melhor manutenibilidade\n- Evita conflitos de CSS\n\n### ✅ Componentes Específicos do GRC\n- Dashboard cards\n- KPI indicators\n- Risk assessment components\n- Compliance status\n- Vendor risk cards\n- Policy status\n\n## Como Usar\n\n### 1. Variáveis CSS Base\n\nTodas as cores são definidas como variáveis CSS no `:root`:\n\n```css\n:root {\n  --primary: 173 88% 58%;\n  --primary-foreground: 210 40% 98%;\n  --secondary: 272 64% 47%;\n  --accent: 335 56% 42%;\n  /* ... mais variáveis */\n}\n```\n\n### 2. Classes Utilitárias\n\nUse classes pré-definidas para aplicar cores do tema:\n\n```html\n<!-- Status indicators -->\n<span class=\"status-success\">Ativo</span>\n<span class=\"status-warning\">Pendente</span>\n<span class=\"status-danger\">Crítico</span>\n\n<!-- Risk badges -->\n<span class=\"risk-badge critical\">Risco Crítico</span>\n<span class=\"risk-badge high\">Risco Alto</span>\n\n<!-- Dashboard cards -->\n<div class=\"dashboard-card\">Conteúdo</div>\n<div class=\"kpi-card\">KPI</div>\n```\n\n### 3. Componentes React Utilitários\n\nImporte e use componentes pré-configurados:\n\n```tsx\nimport {\n  StatusIndicator,\n  RiskBadge,\n  KPICard,\n  DashboardCard,\n  ComplianceStatus\n} from '@/components/ui/theme-utils';\n\n// Status indicator\n<StatusIndicator status=\"success\">Operacional</StatusIndicator>\n\n// Risk badge\n<RiskBadge risk=\"high\">Alto Risco</RiskBadge>\n\n// KPI Card\n<KPICard\n  title=\"Compliance Score\"\n  value=\"92%\"\n  trend={{ direction: 'up', value: '+5%' }}\n  icon={<CheckCircle />}\n/>\n\n// Dashboard card\n<DashboardCard interactive onClick={handleClick}>\n  Conteúdo do card\n</DashboardCard>\n```\n\n### 4. Hook para Cores\n\nAcesse cores do tema dinamicamente:\n\n```tsx\nimport { useThemeColors, useRiskColors, useStatusColors } from '@/hooks/useThemeColors';\n\nfunction MyComponent() {\n  const colors = useThemeColors();\n  const riskColors = useRiskColors();\n  const statusColors = useStatusColors();\n  \n  return (\n    <div style={{ backgroundColor: colors.primary }}>\n      <span style={{ color: riskColors.getRiskColor('high') }}>\n        Risco Alto\n      </span>\n      <div style={{ backgroundColor: statusColors.getStatusBackgroundColor('success', 0.1) }}>\n        Status de Sucesso\n      </div>\n    </div>\n  );\n}\n```\n\n### 5. Aplicação Dinâmica de Cores\n\n```tsx\nimport { useApplyThemeColors } from '@/hooks/useThemeColors';\n\nfunction MyComponent() {\n  const { applyColors, getInlineStyles } = useApplyThemeColors();\n  const elementRef = useRef<HTMLDivElement>(null);\n  \n  useEffect(() => {\n    if (elementRef.current) {\n      applyColors(elementRef.current, {\n        'background-color': 'primary',\n        'color': 'primaryForeground',\n        'border-color': 'border'\n      });\n    }\n  }, [applyColors]);\n  \n  // Ou usar estilos inline\n  const styles = getInlineStyles({\n    'background-color': 'card',\n    'color': 'cardForeground'\n  });\n  \n  return (\n    <div ref={elementRef} style={styles}>\n      Conteúdo\n    </div>\n  );\n}\n```\n\n## Componentes Específicos do GRC\n\n### Dashboard Cards\n\n```tsx\n// Card básico\n<div className=\"dashboard-card\">\n  Conteúdo do dashboard\n</div>\n\n// Card interativo\n<div className=\"dashboard-card interactive\" onClick={handleClick}>\n  Card clicável\n</div>\n```\n\n### KPI Cards\n\n```tsx\n<div className=\"kpi-card\">\n  <div className=\"kpi-label\">Riscos Críticos</div>\n  <div className=\"kpi-value\">5</div>\n  <div className=\"kpi-trend positive\">↗ -2 desde ontem</div>\n</div>\n```\n\n### Risk Assessment\n\n```tsx\n<div className=\"risk-assessment-card interactive\">\n  <h3>Assessment de Segurança</h3>\n  <RiskBadge risk=\"medium\">Risco Médio</RiskBadge>\n</div>\n```\n\n### Vendor Risk\n\n```tsx\n<div className=\"vendor-risk-card high-risk\">\n  <h3>Fornecedor XYZ</h3>\n  <span className=\"vendor-status active\">Ativo</span>\n</div>\n```\n\n### Compliance Status\n\n```tsx\n<div className=\"compliance-status-high\">\n  <span>LGPD</span>\n  <span>95%</span>\n  <div className=\"compliance-progress\">\n    <div className=\"compliance-progress-bar high\" style={{width: '95%'}} />\n  </div>\n</div>\n```\n\n## Cores de Risco\n\nO sistema inclui cores específicas para níveis de risco:\n\n```css\n--risk-critical: 0 84% 60%;    /* Vermelho */\n--risk-high: 24 95% 53%;       /* Laranja */\n--risk-medium: 38 92% 50%;     /* Amarelo */\n--risk-low: 142 76% 36%;       /* Verde */\n```\n\nUse as classes:\n\n```html\n<span class=\"risk-critical\">Crítico</span>\n<span class=\"risk-high\">Alto</span>\n<span class=\"risk-medium\">Médio</span>\n<span class=\"risk-low\">Baixo</span>\n```\n\n## Dark Mode\n\nO sistema suporta automaticamente dark mode:\n\n```css\n.dark {\n  --background: 222 18% 4%;\n  --foreground: 0 0% 100%;\n  --card: 215 8% 12%;\n  /* ... cores específicas para dark mode */\n}\n```\n\n## Responsividade\n\nTodos os componentes são responsivos:\n\n```css\n@media (max-width: 640px) {\n  .dashboard-card,\n  .kpi-card {\n    margin: 0.5rem;\n    padding: 1rem;\n  }\n}\n```\n\n## Acessibilidade\n\nO sistema inclui melhorias de acessibilidade:\n\n```css\n/* Focus states */\n.dashboard-card:focus-visible {\n  outline: 2px solid hsl(var(--ring));\n  outline-offset: 2px;\n}\n\n/* High contrast mode */\n@media (prefers-contrast: high) {\n  .dashboard-card {\n    border-width: 2px;\n  }\n}\n\n/* Reduced motion */\n@media (prefers-reduced-motion: reduce) {\n  .dashboard-card {\n    transition: none;\n  }\n}\n```\n\n## Configuração de Temas\n\n### 1. Temas Globais\n\nConfigurados em **Configurações Gerais > Temas e Cores**:\n\n- Tema UI Nativa (padrão)\n- Temas customizados\n- Paletas de cores personalizadas\n\n### 2. Temas por Tenant\n\nCada tenant pode ter sua própria paleta:\n\n```typescript\ninterface TenantThemeConfig {\n  palette: {\n    primary: string;\n    secondary: string;\n    tertiary: string;\n  };\n  dark_mode_palette?: ColorPalette;\n  inherit_global: boolean;\n}\n```\n\n### 3. Hierarquia de Temas\n\n1. **Tema do Tenant** (prioridade mais alta)\n2. **Preferências do Usuário**\n3. **Tema Global**\n4. **Tema UI Nativa** (fallback)\n\n## Melhores Práticas\n\n### ✅ Faça\n\n- Use variáveis CSS para cores\n- Utilize componentes utilitários pré-configurados\n- Teste em dark mode\n- Verifique acessibilidade\n- Use classes semânticas (ex: `status-success`)\n\n### ❌ Evite\n\n- Cores hardcoded\n- Uso de `!important`\n- Ignorar dark mode\n- Componentes sem integração de tema\n\n## Troubleshooting\n\n### Cores não aplicadas\n\n1. Verifique se as variáveis CSS estão definidas\n2. Confirme que o tema está ativo\n3. Verifique especificidade CSS\n4. Teste sem cache do navegador\n\n### Dark mode não funciona\n\n1. Verifique se a classe `.dark` está no `<html>`\n2. Confirme variáveis dark mode definidas\n3. Teste toggle de tema\n\n### Performance\n\n1. Use `will-change` para animações\n2. Evite transições desnecessárias\n3. Otimize seletores CSS\n4. Use `transform` ao invés de `position`\n\n## Extensibilidade\n\nPara adicionar novos componentes:\n\n1. **Defina variáveis CSS** no `:root`\n2. **Crie classes** em `theme-extensions.css`\n3. **Adicione componentes React** em `theme-utils.tsx`\n4. **Documente** o uso\n\nExemplo:\n\n```css\n/* theme-extensions.css */\n.my-component {\n  background-color: hsl(var(--primary));\n  color: hsl(var(--primary-foreground));\n  border: 1px solid hsl(var(--border));\n}\n```\n\n```tsx\n// theme-utils.tsx\nexport const MyComponent: React.FC<Props> = ({ children, className }) => {\n  return (\n    <div className={cn('my-component', className)}>\n      {children}\n    </div>\n  );\n};\n```\n\n## Conclusão\n\nO sistema de temas do GRC Controller oferece:\n\n- **Integração completa** com todos os componentes\n- **Flexibilidade** para customização\n- **Performance** otimizada\n- **Acessibilidade** garantida\n- **Manutenibilidade** através de boas práticas\n\nTodos os elementos da aplicação estão agora integrados à paleta de cores configurável, garantindo consistência visual e uma experiência de usuário coesa.\n"