-- Script simplificado com dados de teste funcionais

-- Inserir planos de investigação (usando colunas corretas)
INSERT INTO ethics_investigation_plans (
    tenant_id,
    ethics_report_id,
    investigation_type,
    investigation_scope,
    investigation_objectives,
    estimated_duration_days,
    planned_start_date,
    planned_completion_date,
    assigned_investigator_id,
    budget_allocated,
    investigation_methodology,
    evidence_preservation_plan,
    witness_interview_plan,
    status,
    created_by,
    created_at,
    updated_at
) VALUES 
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-001' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'full',
    'Investigação completa sobre conflito de interesse',
    'Determinar violações de política e propor medidas corretivas',
    45,
    '2025-01-20',
    '2025-03-05',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    15000.00,
    'Análise documental e entrevistas estruturadas',
    'Preservação de e-mails e documentos do processo',
    'Entrevistas com gestor e fornecedor',
    'active',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    '2025-01-20 09:00:00',
    '2025-01-23 14:30:00'
),
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-002' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'external',
    'Investigação externa sobre assédio moral',
    'Investigação imparcial sobre alegações de assédio',
    30,
    '2025-01-25',
    '2025-02-25',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    25000.00,
    'Investigação externa especializada',
    'Testemunhos gravados e documentos de RH',
    'Entrevistas confidenciais com vítimas',
    'active',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    '2025-01-22 10:00:00',
    '2025-01-25 16:15:00'
);

-- Inserir evidências
INSERT INTO ethics_evidence (
    tenant_id,
    ethics_report_id,
    investigation_plan_id,
    evidence_type,
    description,
    file_path,
    file_hash,
    collected_by,
    collected_date,
    chain_of_custody,
    legal_hold,
    privilege_claimed,
    evidence_category,
    authenticity_verified,
    integrity_status,
    access_restrictions,
    retention_until,
    created_at
) VALUES 
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-001' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    (SELECT id FROM ethics_investigation_plans WHERE investigation_type = 'full' LIMIT 1),
    'digital',
    'E-mails entre gestor e fornecedor no período crítico',
    '/evidence/eth-2025-001/emails-001.eml',
    'sha256:a1b2c3d4e5f6789012345678901234567890abcdef123456',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    '2025-01-21',
    '[{"date": "2025-01-21", "custodian": "Investigador", "action": "Coleta inicial"}]',
    true,
    false,
    'communication',
    true,
    'intact',
    'investigation_team_only',
    '2027-01-21',
    '2025-01-21 10:30:00'
);

-- Inserir ações corretivas
INSERT INTO ethics_corrective_actions (
    tenant_id,
    ethics_report_id,
    action_type,
    description,
    responsible_party_id,
    target_completion_date,
    status,
    effectiveness_measurement,
    verification_method,
    progress_percentage,
    budget_allocated,
    budget_spent,
    follow_up_required,
    created_at,
    updated_at
) VALUES 
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-001' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'policy_update',
    'Revisão da Política de Conflito de Interesses',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    '2025-03-01',
    'in_progress',
    'Taxa de identificação de conflitos aumentou 30%',
    'Auditoria interna',
    60,
    5000.00,
    3200.00,
    true,
    '2025-01-22 09:00:00',
    '2025-01-25 11:30:00'
),
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-003' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'process_improvement',
    'Melhoria no Sistema de Reembolsos',
    (SELECT id FROM profiles WHERE tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f' LIMIT 1),
    '2025-02-15',
    'completed',
    'Zero casos de fraude detectados',
    'Auditoria do sistema',
    100,
    12000.00,
    11500.00,
    false,
    '2025-01-10 10:00:00',
    '2025-02-10 17:20:00'
);

-- Inserir notificações regulamentares
INSERT INTO ethics_regulatory_notifications (
    tenant_id,
    ethics_report_id,
    regulatory_agency,
    notification_type,
    notification_title,
    required_by_date,
    status,
    submission_method,
    agency_contact_info,
    public_disclosure_required,
    follow_up_required,
    legal_counsel_involved,
    risk_level,
    created_at,
    updated_at
) VALUES 
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-001' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'SEC',
    'regulatory_breach',
    'Possível violação em processo licitatório',
    '2025-02-20',
    'pending',
    'electronic_filing',
    'sec-compliance@sec.gov.br',
    false,
    true,
    true,
    'medium',
    '2025-01-22 14:00:00',
    '2025-01-25 09:30:00'
),
(
    '46b1c048-85a1-423b-96fc-776007c8de1f',
    (SELECT id FROM ethics_reports WHERE protocol_number = 'ETH-2025-002' AND tenant_id = '46b1c048-85a1-423b-96fc-776007c8de1f'),
    'OSHA',
    'workplace_safety',
    'Ambiente de trabalho hostil',
    '2025-02-05',
    'submitted',
    'online_portal',
    'workplace-safety@osha.gov',
    false,
    true,
    false,
    'low',
    '2025-01-25 11:45:00',
    '2025-01-28 15:20:00'
);