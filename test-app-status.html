<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste de Status da Aplica√ß√£o</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .status-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            margin: 10px 0;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .success { border-left: 4px solid #22c55e; }
        .error { border-left: 4px solid #ef4444; }
        .warning { border-left: 4px solid #f59e0b; }
        .info { border-left: 4px solid #3b82f6; }
        .test-button {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #2563eb;
        }
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üîß Teste de Status da Aplica√ß√£o GRC</h1>
    
    <div class="status-card info">
        <h3>üìä Status do Sistema</h3>
        <p><strong>Timestamp:</strong> <span id="timestamp"></span></p>
        <p><strong>URL Base:</strong> http://localhost:8080</p>
        <p><strong>P√°gina de Incidentes:</strong> http://localhost:8080/incidents</p>
    </div>

    <div class="status-card">
        <h3>üß™ Testes Dispon√≠veis</h3>
        <button class="test-button" onclick="testServerStatus()">Testar Servidor</button>
        <button class="test-button" onclick="testIncidentsPage()">Testar P√°gina de Incidentes</button>
        <button class="test-button" onclick="testAPIEndpoint()">Testar API</button>
        <button class="test-button" onclick="openIncidentsPage()">Abrir P√°gina de Incidentes</button>
    </div>

    <div id="results"></div>

    <script>
        // Atualizar timestamp
        document.getElementById('timestamp').textContent = new Date().toLocaleString();

        function addResult(title, message, type = 'info') {
            const results = document.getElementById('results');
            const card = document.createElement('div');
            card.className = `status-card ${type}`;
            card.innerHTML = `
                <h4>${title}</h4>
                <p>${message}</p>
                <small>Testado em: ${new Date().toLocaleString()}</small>
            `;
            results.appendChild(card);
        }

        async function testServerStatus() {
            try {
                const response = await fetch('http://localhost:8080');
                if (response.ok) {
                    addResult('‚úÖ Servidor Online', 'O servidor est√° respondendo corretamente na porta 8080', 'success');
                } else {
                    addResult('‚ö†Ô∏è Servidor com Problemas', `Servidor respondeu com status: ${response.status}`, 'warning');
                }
            } catch (error) {
                addResult('‚ùå Servidor Offline', `Erro ao conectar: ${error.message}`, 'error');
            }
        }

        async function testIncidentsPage() {
            try {
                const response = await fetch('http://localhost:8080/incidents');
                if (response.ok) {
                    addResult('‚úÖ P√°gina de Incidentes', 'A rota /incidents est√° acess√≠vel', 'success');
                } else {
                    addResult('‚ö†Ô∏è Problema na P√°gina', `P√°gina de incidentes retornou: ${response.status}`, 'warning');
                }
            } catch (error) {
                addResult('‚ùå Erro na P√°gina', `Erro ao acessar /incidents: ${error.message}`, 'error');
            }
        }

        async function testAPIEndpoint() {
            try {
                // Teste b√°sico de conectividade
                const response = await fetch('http://localhost:8080/api/health', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                if (response.ok) {
                    addResult('‚úÖ API Funcionando', 'Endpoint de API est√° respondendo', 'success');
                } else {
                    addResult('‚ö†Ô∏è API com Problemas', `API retornou: ${response.status}`, 'warning');
                }
            } catch (error) {
                addResult('‚ÑπÔ∏è API Teste', 'Endpoint de teste n√£o encontrado (normal para aplica√ß√£o React)', 'info');
            }
        }

        function openIncidentsPage() {
            window.open('http://localhost:8080/incidents', '_blank');
            addResult('üîó P√°gina Aberta', 'P√°gina de incidentes aberta em nova aba', 'info');
        }

        // Executar teste inicial
        window.onload = function() {
            testServerStatus();
        };
    </script>
</body>
</html>